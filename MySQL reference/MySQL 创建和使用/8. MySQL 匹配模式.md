### MySQL 匹配模式

MySQL提供标准的SQL模式匹配以及基于扩展正则表达式的模式匹配形式，类似于Unix实用程序（如vi，grep和sed）使用的扩展正则表达式。

SQL模式匹配使您可以使用_来匹配任何单个字符，使用％来匹配任意数量的字符（包括零个字符）。 在MySQL中，SQL模式默认情况下不区分大小写。 这里显示了一些例子。 使用SQL模式时不要使用=或<>。 请改用LIKE或NOT LIKE比较运算符。

要查找以b开头的名称：

```
mysql> SELCT * FROM pet WHERE name LIKE 'b%';
+--------+--------+---------+------+------------+------------+
| name   | owner  | species | sex  | birth      | death      |
+--------+--------+---------+------+------------+------------+
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL       |
| Bowser | Diane  | dog     | m    | 1989-08-31 | 1995-07-29 |
+--------+--------+---------+------+------------+------------+

```

查找以fy结尾的名称:

```
mysql> SELECT * FROM pet WHERE name LIKE '%fy';
+--------+--------+---------+------+------------+-------+
| name   | owner  | species | sex  | birth      | death |
+--------+--------+---------+------+------------+-------+
| Fluffy | Harold | cat     | f    | 1994-01-05 | NULL  |
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL  |
+--------+--------+---------+------+------------+-------+

```

查找包含w的名称:

```
mysql> SELECT * FROM pet WHERE name LIKE '%w%';
+----------+-------+---------+------+------------+------------+
| name     | owner | species | sex  | birth      | death      |
+----------+-------+---------+------+------------+------------+
| Claws    | Gwen  | cat     | m    | 1994-03-17 | NULL       |
| Bowser   | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
| Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL       |
+----------+-------+---------+------+------------+------------+

```

要查找包含五个字符的名称，请使用 **"_"** 图案字符的五个实例：

```
mysql> SELECT * FROM pet WHERE name LIKE '_____';
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+

```

MySQL提供的另一种模式匹配使用扩展的正则表达式。当你测试此类模式的匹配项时，请使用REGEXP和NOT REGEXP运算符（或RLIKE和NOT RLIKE，它们是同义词）。

下面是列出了扩展正则表达式的一些使用规则：

* **"."** 匹配单个字符
* 字符类 **“[...]“** 匹配括号内的任何字符。 例如，**”[abc]“** 匹配 **”a“** ，**”b“** 或 **“c”** 。 要匹配一系列字符，请使用短划线。 **“[a-z]”** 匹配任何字母，而 **”[0-9]“** 匹配任何数字。
*  **"*"** 匹配前面的事物的零个或多个实例。 例如，**"x *"** 匹配任意数量的 **"x"** 个字符，**"[0-9]*"**  匹配任意数量的数字，而。**"*"** 匹配任意数量的任何数字。\
* 如果模式匹配正在测试的值中的任何位置，则正则表达式模式匹配成功。 （这与LIKE模式匹配不同，仅当模式匹配整个值时才成功。）
* 要锚定模式以使其必须与要测试的值的开头或结尾匹配，请在模式的开头使用 **"^"** 或在结尾使用 **"$"** 。

为了演示扩展正则表达式的工作原理，先前显示的LIKE查询将在此处重写以使用REGEXP。

要查找以b开头的名称，请使用^来匹配名称的开头：

```
mysql> SELECT * FROM pet WHERE name REGEXP '^b';
+--------+--------+---------+------+------------+------------+
| name   | owner  | species | sex  | birth      | death      |
+--------+--------+---------+------+------------+------------+
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL       |
| Bowser | Diane  | dog     | m    | 1989-08-31 | 1995-07-29 |
+--------+--------+---------+------+------------+------------+

```

要强制 **REGEXP** 比较区分大小写，请使用 **BINARY** 关键字使其中一个字符串成为二进制字符串。 此查询仅匹配名称开头的小写字母b：

```
mysql> SELECT * FROM pet WHERE name REGEXP BINARY '^b';
Empty set (0.01 sec)

```

查找包含w的名称, 使用这个对象:

```
mysql> SELECT * FROM pet WHERE name REGEXP 'w';
+----------+-------+---------+------+------------+------------+
| name     | owner | species | sex  | birth      | death      |
+----------+-------+---------+------+------------+------------+
| Claws    | Gwen  | cat     | m    | 1994-03-17 | NULL       |
| Bowser   | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
| Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL       |
+----------+-------+---------+------+------------+------------+

```

因为正则表达式模式匹配，如果它出现在值的任何位置，则在上一个查询中不必在模式的任何一侧放置通配符以使其与整个值匹配，就像SQL模式一样。

要查找包含五个字符的名称，请使用^和$来匹配名称的开头和结尾，以及五个实例。 之间：

```
mysql> SELECT * FROM pet WHERE name REGEXP '^.....$';
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+

```

您还可以使用{n}（“repeat-n-times”）运算符编写上一个查询：

```
mysql> SELECT * FROM pet WHERE name REGEXP '^.{5}$';
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+

```


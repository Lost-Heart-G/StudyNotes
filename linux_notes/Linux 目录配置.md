## Linux 目录配置

Linux 目录配置是依据 Filesystem Hierarchy Standard (FHS) 标准

FHS 依据文件系统使用的频繁与否与是否允许用户随意修改，而将目录定义为四种交互作用的形态，用表格来说有点像下面这样：

|                  | 可分享(shareable)        | 不可分享(unshareable)  |
| ---------------- | ------------------------ | ---------------------- |
| 不变(static)     | /usr (软件存放处)        | /etc (配置文件)        |
|                  | /opt (第三方辅助软件)    | /boot (启动与内核文件) |
| 可变动(variable) | /var/mail(用户邮箱)      | /var/run(程序相关)     |
|                  | /var\/spool/news(新闻组) | /var/lock(程序相关)    |

###  1、根目录（/）的意义与内容

根目录是整个系统最重要的一个目录，因为不但所有的目录都是由根目录衍生出来，同时 **根目录也与启动、还原、系统修复等操作有关。** 

FHS 标准建议: **根目录 (/) 所在分区应该越小越好，且应用程序安装的软件最好不要与根目录放在同一个分区内，保持根目录越小越好。如此不但性能最佳，根目录所在的文件系统也较不容易发生问题。** 

| 目录         | 应放置文件内容                                               |
| ------------ | ------------------------------------------------------------ |
|              | 第一部分: FHS 要求必须要存放在的目录                         |
| /bin         | 系统有很多存放执行文件的目录，但 /bin 比较特殊。因为 /bin **放置的是在单人维护模式下还能够被使用的命令** 。在 /bin 下面的命令可以被 root 与一般账号所使用，主要有: cat、chmod、chown、date、mv、mkdir、cp、bash 等常用的命令。 |
| /boot        | 这个目录主要放置启动会使用到的文件，包括 Linux 内核文件以及启动选项与启动所需配置文件等。Linux **内核常用的文件名为** : vmlinuz，如果使用的是 grub2 这个启动引导程序，则还会存在 /boot/grub2/ 这个目录 |
| /dev         | 在 Linux 系统上，任何设备与接口设备都是以文件的形式存在于这个目录当中。你只要通过读写这个目录下的某个文件，就等于读写某个设备，比较重要的文件有 /dev/null、/dev/zero、/dev/tty、/dev/loop\*、/dev/sd\* 等 |
| /etc         | 系统主要的配置文件几乎都放置在这个目录内，例如人员的账号密码文件、各种服务的启动文件等。一般来说，这个目录下的各个文件属性是可以让一般用户查看的，但只有 root  有权利修改。FHS **建议不要放置可执行文件(binary) 在这个目录中。** 比较重要的文件有: /etc/modprobe.d/、/etc/passwd、/etc/fstab、/etc/issue 等。另外 FHS 还规范几个重要的目录最好要存放在 /etc/ 目录下: <br>*    /etc/opt (必要)： 这个目录放置第三方辅助软件 /opt 的相关配置文件； <br />*    /etc/X11 (建议):  与 X Window 有关的各种配置文件都在这里，尤其是 xorg.conf 这个 X Server 的配置文件；<br>*   /etc/sgml/ (建议):  与 SGML 格式有关的各项配置文件;<br />*   /etc/xml/ (建议):  与 XML 格式有关的各项配置文件； |
| /lib         | 系统的函数库非常多，而 /lib **放置的则是在启动时会用到的函数库，以及在 /bin 或 /sbin 下面的命令会调用的函数库而已。** 另外 FHS 还要求下面的目录必须存在:<br> *  /lib/modules/  : 这个目录主要放置可抽换式的内核相关模块(驱动程序) |
| /media       | media 是媒体的英文，顾名思义，这个 /media **下面放置的就是可删除的设备** ，包括软盘、光盘、DVD 等设备都暂时挂载于此。 |
| /mnt         | 如果想要暂时挂载某些额外的设备，一般建议你可以放置到这个目录中。 |
| /opt         | 第三方辅助软件放置的目录。                                   |
| /run         | 早期的 FHS 规定系统启动后所产生的各项信息应该要放置到 /var/run 目录下，新版的 FHS 则规范到 /run 下面，由于 /run 可以使用内存来模拟，因此性能上会好很多 |
| /sbin        | Linux 有非常多命令是用来设置系统环境的，这些命令只有 root 才能够用来设置系统，其他用户最多只能用来查询。**放在 /sbin 下面的为启动过程中所需要的，里面包括了启动、修复、还原系统所需要的命令。** 至于某些服务器软件程序，一般则放置到 /usr/sbin/ 当中。至于本机自行安装的软件所产生的系统执行文件(system binary)，则放置到 /usr/local/sbin/ 当中。常见的命令包括: fdisk、fsck、ifconfig、mkfs等 |
| /srv         | srv 可以视为 service 的缩写，是一些网络服务启动之后，这些服务所需要使用的数据目录，常见的服务例如 WWW、FTP 等。例如，WWW 服务器需要的网页数据就可以放置在 /srv/www/ 里面。不过，系统的服务数据如果尚未要提供给因特网任何人游览的话，默认还是建立放置到 /var/lib 下面即可 |
| /tmp         | 这是让一般用户或是正在执行的程序暂时放置文件的地方。这个目录是任何人都能够存取的，所以要定期地清理一下。当然，重要数据不可放置在此目录。因为 FHS 甚至建议启动时，应该要将 /tmp 下的数据都删除 |
| /usr         | 第二层 FHS 设置，后续介绍                                    |
| /var         | 第二层 FHS 设置，主要为放置变动性的数据，后续介绍            |
|              | 第二部分： FHS 建议可以存放在的目录                          |
| /home        | 这是系统默认的用户家目录(home directory)。在你新增一个一般用户账号时，默认的用户家目录都会规范到这里来，比较重要的是家目录有两种代号:<br>*   ~ : 代表目前这个用户的家目录；<br>*   ~admin : 代表 admin 的家目录 |
| /lib\<qual\> | 用来存放于 /lib 不同格式的二进制函数库，例如支持 64 为的 /lib64 函数库等 |
| /root        | 系统管理员(root)的家目录，之所以放在这里，是因为如果进入单人维护模式而仅挂载根目录时，该目录就能拥有 root 的家目录，所有我们会希望 root 家目录与根目录放置在同一个分区中 |

事实上 FHS 针对根目录所定义的标准就仅有上面的东西，不过我们的 Linux 下面还有许多目录也需要了解一下。下面是几个在 Linux 当中也非常重要的目录：

| 目录        | 应放置文件内容                                               |
| ----------- | ------------------------------------------------------------ |
| /lost+found | 这个目录是使用标准的 ext2、ext3、ext4 文件系统才会产生的一个目录，目的在于当文件系统发生错误时，将一些遗失的片段放置到这个目录下，不过如果使用的是 xfs 文件系统的话，就不会存在这个目录 |
| /proc       | 这个目录本身是一个虚拟文件系统(virtual filesystem)，它放置的数据都是在内存当中，例如系统的内核，进程信息(process)、外接设备的状态及网络状态等。因为这个目录下的数据都是在内存当中，所以本身不占任何硬盘空间，比较重要的文件例如: /proc/cpuinfo、/proc/dma、/proc/interrupts、/proc/ioports、proc/net\* 等 |
| /sys        | 这个目录其实跟 /proc 非常类似，也是一个虚拟的文件系统，主要也是记录内核与系统硬件信息相关的内容。包括目前已加载的内核模块与内核检测到的硬件设备信息等，这个目录同样不占硬盘容量 |

### 2、usr的意义与内容

 依据 FHS 的基本定义， /usr 里放置的数据属于可分享与不可变动( shareable、static)， usr 是 UNIX Software Resource 的缩写，也就是 UNIX 操作系统软件资源所放置的目录，/usr 的子目录下建议有下面这些。

| 目录             | 应放置文件内容                                               |
| ---------------- | ------------------------------------------------------------ |
|                  | 第一部分: FHS 要求必须要存在的目录                           |
| /usr/bin/        | 所有一般用户能够使用的命令都放在这里。目前新的Centos 7 已经将全部的用户命令放置于此，而使用链接文件的方式将 /bin 链接至此。也就是说, /usr/bin 与 /bin 是一模一样的。另外，FHS 要求在此目录下不应该有子目录 |
| /usr/lib/        | 基本上，与 /lib 功能相同，所以 /lib 就是链接到此目录中的     |
| /usr/local       | 系统管理员在本机安装自己下载的软件(非发行版默认提供者)，建议安装到此目录，这样会比较便于管理。举例子来说，你的发行版提供的软件较旧，你想安装较新的软件但又不想删除旧版本，此时你可以将旧版本安装与 /usr/local/ 目录下，可与原先的旧版本软件有分别。你可以自行到 /usr/local/ 去看看，该目录下也是具有 bin、etc、include、lib ... 的子目录 |
| /usr/sbin        | 非系统正常运行所需要的系统命令，最常见的就是某些网络服务器软件的服务命令。不过基本功能与 /sbin 也差不多，因此目前 /sbin 就是链接到此目录中的 |
| /usr/share       | 主要放置只读文件的数据，当然也包括共享文件，在这个目录下放置的数据几乎是不分硬件架构均可读取的数据，因此几乎都是文本文件。在此目录下常见的还有这些子目录：<br>*  /usr/share/man:   在线帮助文件<br>*  /usr/share/doc :   软件的说明文档<br>*  /usr/share/zoneinfo: 与时区相关的时区文件 |
|                  | 第二部分: FHS 建议可以存在的目录                             |
| /usr/games/      | 与游戏相关的数据放置处                                       |
| /usr/include     | c/c++ 等程序语言头文件(header)与包含文件(include)放置处，当我们以 Tarball 方式(*.tar.gz 的方式安装软件)安装某些程序时，会使用到里面的许多文件 |
| /usr/libexec     | 某些不被一般用户常用的执行文件或脚本(script)等，都会放置在此目录中 |
| /usr/lib\<qual\> | 与 lib\<qual\> 功能相同，因此目前 /lib\<qual\> 就是链接到此目录中 |
| /usr/src         | 一般源代码建议放置到这里，src 有 source 的意思。至于内核源代码则建议放置到 /usr/src/Linux/ 目录下 |

### 3、/var 的意义与内容

/var 就是在系统运行后才渐渐占用硬盘容量的目录。因为 /var 目录主要针对经常性变动的文件，包括缓存(cache)、日志文件(log file) 以及某些软件运行产生的文件，包括程序文件(lock file、run file)，或例如 MySQL数据库的文件等。常见的子目录有。

| 目录        | 应放置文件内容                                               |
| ----------- | ------------------------------------------------------------ |
|             | 第一部分: FHS 要求必须要存在的目录                           |
| /var/cache/ | 应用程序本身运行过程中会产生的一些缓存                       |
| /var/lib/   | 程序本身执行过程中，需要使用到的数据文件放置的目录。在此目录下各自的软件应该要有各自的目录。举例来说，MySQL 的数据库放置到 /var/lib/mysql/ 而 rpm 的数据库则放置到 /var/lib/rpm 中 |
| /var/lock/  | 某些设备或是文件资源一次只能被一个应用程序所使用，如果同时有两个程序使用该设备时，就可能产生一些错误的状况，因此就得要将该设备上锁 (lock)，以确保该设备只会给单一软件所使用。目前此目录也以挪到 /run/lock 中 |
| /var/mail/  | 放置个人电子邮箱的目录，不过这个目录也被放置到 /var/spool/mail/ 目录中，通常这两个目录是互相为链接文件 |
| /var/run/   | 某些程序或是服务启动后，会将它们的 PID 放置在这个目录下，与 /run 相同，这个目录链接到 /run 目录 |
| /var/spool/ | 这个目录通常放置一些队列数据，所谓的队列就是排队等待其他程序使用的数据，这些数据被使用后通常都会被删除。 |

